var CanvasChart=function(){var t,e,n,a,l,i,r=40,o=75,s=0,d=75,f=0,u=0,h={lines:"lines",points:"points"},x=function(){c(),T(),y(),null!=i.renderTypes&&null!=i.renderTypes||(i.renderTypes=[h.lines]);for(var t=0;t<i.renderTypes.length;t++)g(i.renderTypes[t])},P=function(){for(var t=0;t<i.dataPoints.length;t++)i.dataPoints[t].y>f&&(f=i.dataPoints[t].y)},c=function(){t.fillStyle="#fff",t.fillRect(o,r,l-o,a-r),t.fillStyle="black"},T=function(){var e=null!=i.labelFont?i.labelFont:"10px Arial";t.font=e,t.textAlign="center";var s=t.measureText(i.title);t.fillText(i.title,n/2,r/2),s=t.measureText(i.xLabel),t.fillText(i.xLabel,o+l/2-s.width/2,a+d/1.2),t.save(),t.rotate(-Math.PI/2),t.font=e,t.fillText(i.yLabel,a/2*-1,o/4),t.restore()},y=function(){for(var e=a/i.dataPoints.length,n=0,s=(i.dataPoints.length,v()),h=o,x=0;x<i.dataPoints.length;x++){if(n+=0==x?r:e,x%Math.floor(i.dataPoints.length/10)==0&&Math.round(f-(0==x?0:n/u))>0){b(o,n,l+12,n,"#E8E8E8"),t.font=null!=i.dataPointFont?i.dataPointFont:"14px Arial";var P=Math.round(f-(0==x?0:n/u)),c=t.measureText(P);t.fillText(P,o-(c.width>=14?c.width:10)-7,n+4)}b(h,a,h,r,"#E8E8E8"),P=i.dataPoints[x].x,c=t.measureText(P),t.save(),t.translate(h,a+d/3),t.rotate(Math.PI/10),t.translate(-h,-(a+d/3)),t.fillText(P,h,a+d/3),t.restore(),h+=s}b(o,r,o,a,"black"),b(o,a,l+15,a,"black")},g=function(e){for(var n=i.dataColors,a=v(),l=0,s=0,d=0;d<i.dataPoints.length;d++){var x=i.dataPoints[d],P=(f-x.y)*u;P<r&&(P=r);var c=d*a+o;d>0&&e==h.lines&&b(c,P,l,s,n[d],2),e==h.points&&(t.beginPath(),t.fillStyle=n[d],t.arc(c,P,5,0,2*Math.PI,!1),t.fill(),t.lineWidth=1,t.strokeStyle=n[d],t.stroke(),t.closePath(),txt=i.dataPoints[d].y,txtSize=t.measureText(txt),t.fillStyle="#000",t.fillText(txt,c+10,P-15)),l=c,s=P}},v=function(){return Math.round(l/i.dataPoints.length)-1},b=function(e,n,a,l,i,r){null!=i&&(t.strokeStyle=i),null!=r&&(t.lineWidth=r),t.beginPath(),t.moveTo(e,n),t.lineTo(a,l),t.stroke(),t.closePath()};return{renderType:h,render:function(h,c){i=c,P();var T=document.getElementById(h);e=T.getAttribute("height"),n=T.getAttribute("width"),l=n-(o+s),u=(a=e-(r+d))/f,t=T.getContext("2d"),x()}}}();